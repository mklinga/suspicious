{"version":3,"sources":["components/OkJsonArray/index.tsx","utils/common.ts","utils/filter.ts","components/OkJsonString/index.tsx","components/OkJsonNull/index.tsx","components/OkJsonBoolean/index.tsx","components/OkJsonNumber/index.tsx","components/OkJsonObject/index.tsx","components/RenderBlock/index.tsx","utils/merge.ts","components/Viewer/index.tsx","utils/model.ts","components/DataInput/index.tsx","components/Toolbar/index.tsx","App.tsx","index.tsx"],"names":["OkJsonArray","key","data","children","React","useState","closed","setClosed","buttonClassName","valueClassName","className","type","onClick","identity","x","noop","update","path","value","obj","isArray","Array","nextObj","concat","length","idx","nextPath","slice","nextValue","isHit","filter","toString","toLowerCase","includes","getHitPaths","fn","fns","reduce","result","C","findHits","flatMap","nestedValue","index","Object","entries","xs","map","replace","pickByPath","segment","parts","split","oldParts","res","i","isFinal","parent","acc","op","part","container","oldValue","oldPartsWithValue","pop","push","OkJsonString","hasHighlight","OkJsonNull","OkJsonBoolean","OkJsonNumber","OkJsonObject","RenderBlock","nestedKey","addToArray","arr","addToObj","Viewer","visibleData","p","merge","obj1","obj2","isArrayMerge","destination","forEach","nextDestination","undefined","isMergable","visibleDataSection","Math","random","substring","parseDataItem","Boolean","Number","isNaN","parseType","objValue","parseDataModel","parsedValue","mockJson","bigObject","cute_array","is_this","c","id","smallObject","e","straightText","big_number","false","very","nested","and","surprisingly","boring","object","DataInput","setError","setData","bigBox","useRef","internetUrl","loadFromUrl","a","current","fetch","response","json","canPaste","navigator","clipboard","readText","then","text","JSON","parse","catch","ref","placeholder","Toolbar","setFilter","inputValue","setInputValue","firstMount","useEffect","interval","setTimeout","clearTimeout","onChange","target","App","error","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.bc44518c.chunk.js","sourcesContent":["import React from 'react';\n\ntype Props = {\n  data: {\n    key: string,\n  },\n  children: React.ReactNode\n};\n\nconst OkJsonArray = ({ data: { key }, children }: Props) => {\n  const [closed, setClosed] = React.useState<boolean>(false);\n\n  const buttonClassName = closed\n    ? 'Ok-closable-button Ok-closable-button-closed'\n    : 'Ok-closable-button Ok-closable-button-open';\n\n  const valueClassName = closed\n    ? 'Ok-value Ok-Array-value closed'\n    : 'Ok-value Ok-Array-value open';\n\n  return (\n    <div className=\"Ok-block Ok-Array-block\">\n      <div className=\"Ok-key Ok-Array-key\">\n        <button className={buttonClassName} type=\"button\" onClick={() => setClosed(!closed)}>{key}</button>\n      </div>\n      <div className={valueClassName}>\n        <span className=\"Ok-Array-bracket-open\">[</span>\n        {closed ? ' ... ' : children}\n        <span className=\"Ok-Array-bracket-close\">]</span>\n      </div>\n    </div>\n  );\n};\n\nexport default OkJsonArray;\n","export const identity = (x: any): any => x;\n\nexport const noop = (): void => { };\n\nexport const not = (x: any): boolean => !x;\n\nexport const doto = (method: string, ...args: any) => (x: any) => x[method](...args);\n\nexport const pipe = (x: any, ...fns: Array<Function>) => (\n  fns.reduce((result, fn) => fn(result), x)\n);\n\nexport const filter = (fn: (x: any) => boolean) => (xs: Array<any>) => xs.filter(fn);\n\nexport const map = (fn: (x: any) => any) => (xs: Array<any>) => xs.map(fn);\n\nexport const update = (path: Array<string>, value: any, obj: any): any => {\n  const isArray = Array.isArray(obj);\n  const nextObj = isArray ? [].concat(obj) : { ...obj };\n\n  if (path.length === 0) {\n    return nextObj;\n  }\n\n  const idx = path[0];\n  const nextPath = path.slice(1, path.length);\n\n  if (path.length > 1) {\n    if (isArray) {\n      const nextValue = update(nextPath, value, nextObj[idx]);\n      nextObj[idx] = nextValue;\n      return nextObj;\n    }\n\n    return { ...nextObj, [idx]: update(nextPath, value, nextObj[idx]) };\n  }\n\n  if (isArray) {\n    nextObj[idx] = value;\n    return nextObj;\n  }\n\n  return { ...nextObj, [idx]: value };\n};\n\nexport const generateId: () => string = () => Math.random().toString(36).substring(2, 15);\n","import { Filter, OkJsonValue } from '../types';\nimport * as C from './common';\n\nexport const isHit = (value: null | string | boolean | number = '', filter: Filter = { value: '' }): boolean => {\n  if (value === null) {\n    return isHit('null', filter);\n  }\n  return value.toString().toLowerCase().includes(filter.value.toLowerCase());\n};\n\nexport const getHitPaths = (data: OkJsonValue, filter: Filter): Array<string> => {\n  function findHits(value: OkJsonValue, path: string = ''): Array<string | null> {\n    switch (value.type) {\n      case 'string':\n      case 'boolean':\n      case 'number':\n      case 'null':\n        return [isHit(value.value, filter) ? path : null];\n      case 'array':\n        return value.value.flatMap((nestedValue, index) => findHits(nestedValue, `${path}.${index}`));\n      case 'object':\n        return Object.entries(value.value).flatMap(([key, nestedValue]) => findHits(nestedValue, `${path}.${key}`));\n      default:\n        return [null];\n    }\n  }\n\n  const removeDotPrefix = (x: string) => x.replace(/^\\./, '');\n\n  const hitPaths = C.pipe(\n    findHits(data),\n    C.filter(C.identity),\n    C.map(removeDotPrefix),\n  );\n\n  return hitPaths;\n};\n\nexport const pickByPath = (data: OkJsonValue, path: Array<string>): Array<OkJsonValue> => {\n  if (!path || !path.length) {\n    return [data];\n  }\n\n  // here be monsters..\n  const paths = path.map((segment: string) => {\n    const parts = segment.split('.');\n    const oldParts: any[] = [];\n    let res: OkJsonValue = {} as OkJsonValue;\n\n    for (let i = 0; i < parts.length; i += 1) {\n      const isFinal = (i === parts.length - 1);\n      const parent = oldParts.reduce((acc, op) => acc.value[op], data);\n      const part = parts[i];\n      const container = parent.type === 'array' ? [] : {};\n      let oldValue;\n      if (isFinal) {\n        oldValue = {\n          type: parent.type,\n          value: (parent.type === 'array' ? [parent.value[part]] : { [part]: parent.value[part] }),\n        };\n      } else {\n        oldValue = { type: parent.type, value: container };\n      }\n\n      const oldPartsWithValue = oldParts.reduce((acc, op) => acc.concat([op, 'value']), ['value']);\n      if (oldParts.length) oldPartsWithValue.pop();\n      if (i === 0) res = <OkJsonValue>oldValue;\n      else res = C.update(oldPartsWithValue, oldValue, res);\n      oldParts.push(parts[i]);\n    }\n    return res;\n  });\n\n  return paths;\n};\n","import React from 'react';\nimport { isHit } from '../../utils/filter';\n\nimport { OkJsonValue, Filter } from '../../types';\n\ntype Props = {\n  data: {\n    key: string,\n    value: OkJsonValue\n  },\n  filter: Filter\n};\n\nconst OkJsonString: React.FC<Props> = ({ data: { key, value }, filter }) => {\n  const hasHighlight = filter.value && isHit(value.value as boolean, filter);\n  const valueClassName = `Ok-value Ok-String-value ${hasHighlight ? 'Ok-highlighted-value' : ''}`;\n  return (\n    <div className=\"Ok-block Ok-String-block\">\n      <div className=\"Ok-key Ok-String-key\">\n        {key}\n      </div>\n      <div className={valueClassName}>\n        &quot;\n        {value.value}\n        &quot;\n      </div>\n    </div>\n  );\n};\n\nexport default OkJsonString;\n","import React from 'react';\nimport { isHit } from '../../utils/filter';\n\nimport { OkJsonNullPrimitive, Filter } from '../../types';\n\ntype Props = {\n  data: {\n    key: string,\n    value: OkJsonNullPrimitive\n  },\n  filter: Filter\n};\n\nconst OkJsonNull: React.FC<Props> = ({ data: { key, value }, filter }) => {\n  const hasHighlight = filter.value && isHit(value.value as null, filter);\n  const valueClassName = `Ok-value Ok-Null-value ${hasHighlight ? 'Ok-highlighted-value' : ''}`;\n  return (\n    <div className=\"Ok-block Ok-Null-block\">\n      <div className=\"Ok-key Ok-Null-key\">\n        {key}\n      </div>\n      <div className={valueClassName}>\n        null\n      </div>\n    </div>\n  );\n};\n\nexport default OkJsonNull;\n","import React from 'react';\n\nimport { isHit } from '../../utils/filter';\nimport { OkJsonBooleanPrimitive, Filter } from '../../types';\n\ntype Props = {\n  data: {\n    key: string,\n    value: OkJsonBooleanPrimitive\n  },\n  filter: Filter\n};\n\nconst OkJsonBoolean: React.FC<Props> = ({ data: { key, value }, filter }) => {\n  const hasHighlight = filter.value && isHit(value.value as boolean, filter);\n  const valueClassName = `Ok-value Ok-Boolean-value ${hasHighlight ? 'Ok-highlighted-value' : ''}`;\n  return (\n    <div className=\"Ok-block Ok-Boolean-block\">\n      <div className=\"Ok-key Ok-Boolean-key\">\n        {key}\n      </div>\n      <div className={valueClassName}>\n        {value.value.toString()}\n      </div>\n    </div>\n  );\n};\n\nexport default OkJsonBoolean;\n","import React from 'react';\n\nimport { isHit } from '../../utils/filter';\nimport { OkJsonValue, Filter } from '../../types';\n\ntype Props = {\n  data: {\n    key: string,\n    value: OkJsonValue\n  },\n  filter: Filter\n};\n\nconst OkJsonNumber: React.FC<Props> = ({ data: { key, value }, filter }) => {\n  const hasHighlight = filter.value && isHit(value.value as boolean, filter);\n  const valueClassName = `Ok-value Ok-Number-value ${hasHighlight ? 'Ok-highlighted-value' : ''}`;\n  return (\n    <div className=\"Ok-block Ok-Number-block\">\n      <div className=\"Ok-key Ok-Number-key\">\n        {key}\n      </div>\n      <div className={valueClassName}>\n        {value.value}\n      </div>\n    </div>\n  );\n};\nexport default OkJsonNumber;\n","import React from 'react';\n\ntype Props = {\n  data: {\n    key: string,\n  },\n  children: React.ReactNode\n};\n\nconst OkJsonObject = ({ children, data: { key } }: Props) => {\n  const [closed, setClosed] = React.useState<boolean>(false);\n\n  const buttonClassName = closed\n    ? 'Ok-closable-button Ok-closable-button-closed'\n    : 'Ok-closable-button Ok-closable-button-open';\n\n  const valueClassName = closed\n    ? 'Ok-value Ok-Object-value closed'\n    : 'Ok-value Ok-Object-value open';\n\n  return (\n    <div className=\"Ok-block Ok-Object-block\">\n      {key ? (\n        <div className=\"Ok-key Ok-Object-key\">\n          <button\n            className={buttonClassName}\n            type=\"button\"\n            onClick={() => setClosed(!closed)}\n          >\n            {key}\n          </button>\n        </div>\n      ) : null}\n      <div className={valueClassName}>\n        <span className=\"Ok-Object-bracket-open\">{'{'}</span>\n        {closed ? ' ... ' : children}\n        <span className=\"Ok-Object-bracket-close\">{'}'}</span>\n      </div>\n    </div>\n  );\n};\n\nexport default OkJsonObject;\n","\nimport React from 'react';\nimport OkJsonArray from '../OkJsonArray';\nimport OkJsonString from '../OkJsonString';\nimport OkJsonNull from '../OkJsonNull';\nimport OkJsonBoolean from '../OkJsonBoolean';\nimport OkJsonNumber from '../OkJsonNumber';\nimport OkJsonObject from '../OkJsonObject';\n\nimport { OkJsonValue, Filter } from '../../types';\n\ntype Props = {\n  data: {\n    key: string,\n    value: any\n  },\n  filter: Filter\n};\n\nconst RenderBlock: React.SFC<Props> = ({ data: { key, value }, filter }) => (\n  <div className=\"Ok-Json-body\">\n    {(() => {\n      switch (value.type) {\n        case 'string':\n          return <OkJsonString key={key} data={{ key, value }} filter={filter} />;\n        case 'null':\n          return <OkJsonNull key={key} data={{ key, value }} filter={filter} />;\n        case 'boolean':\n          return <OkJsonBoolean key={key} data={{ key, value }} filter={filter} />;\n        case 'number':\n          return <OkJsonNumber key={key} data={{ key, value }} filter={filter} />;\n        case 'array':\n          return (\n            <OkJsonArray data={{ key }}>\n              {value.value.map((nestedValue: OkJsonValue, index: number) => (\n                <RenderBlock\n                  key={index.toString()}\n                  filter={filter}\n                  data={{ key: index.toString(), value: nestedValue }}\n                />\n              ))}\n            </OkJsonArray>\n          );\n\n        case 'object':\n          return (\n            <OkJsonObject data={{ key }}>\n              {Object.entries(value.value).map(([nestedKey, nestedValue]) => (\n                <RenderBlock\n                  key={nestedKey}\n                  filter={filter}\n                  data={{ key: nestedKey, value: nestedValue }}\n                />\n              ))}\n            </OkJsonObject>\n          );\n        default:\n          return null;\n      }\n    })()}\n  </div>\n);\n\nexport default RenderBlock;\n","/* eslint-disable import/prefer-default-export */\n\ntype Obj = {\n  [key: string]: any\n};\n\nconst addToArray = (arr: any[], value: any) => arr.concat([value]);\nconst addToObj = (obj: Obj, value: any, key: string) => ({ ...obj, [key]: value });\n\nconst isMergable = (value: object): boolean => (!!value && (typeof value === 'object'));\n\nexport const merge = <T extends any[] | Obj, S extends any[] | Obj>(obj1: T, obj2: S): T & S => {\n  const isArrayMerge = Array.isArray(obj1);\n  let destination = isArrayMerge ? [] : {};\n\n  Object.entries(obj1).forEach(([key, value]) => {\n    if (isArrayMerge) {\n      destination = addToArray(destination as any[], value);\n    } else {\n      destination = addToObj(destination as Obj, value, key);\n    }\n  });\n\n  Object.entries(obj2).forEach(([key, value]) => {\n    if (isArrayMerge) {\n      destination = addToArray(destination as any[], value);\n    } else {\n      const nextDestination: any = destination;\n      if (nextDestination[key] !== undefined) {\n        if (isMergable(nextDestination[key])) {\n          destination = addToObj(destination as Obj, merge(nextDestination[key], value), key);\n        } else {\n          // Replacing the existing primitive :shrug:\n          destination = addToObj(destination as Obj, value, key);\n        }\n      } else {\n        destination = addToObj(destination as Obj, value, key);\n      }\n    }\n  });\n\n  return destination as T & S;\n};\n","import React from 'react';\nimport RenderBlock from '../RenderBlock';\n\nimport { getHitPaths, pickByPath } from '../../utils/filter';\nimport { generateId } from '../../utils/common';\nimport { merge } from '../../utils/merge';\n\nimport { Filter, OkJsonValue } from '../../types';\n\nimport './Viewer.css';\n\ntype Props = {\n  data: OkJsonValue,\n  filter: Filter\n};\n\nconst Viewer: React.SFC<Props> = ({ data, filter }) => {\n  const visibleData: Array<OkJsonValue> = (filter.value)\n    ? [pickByPath(data, getHitPaths(data, filter))\n      .reduce<OkJsonValue>((acc, p) => merge<OkJsonValue, OkJsonValue>(acc, p), {} as OkJsonValue)]\n    : [data];\n\n  return (\n    <div>\n      {visibleData.map((visibleDataSection) => (\n        <div key={generateId()} className=\"App-Viewer-body\">\n          <RenderBlock data={{ key: '', value: visibleDataSection }} filter={filter} />\n        </div>\n      ))}\n    </div>\n  );\n};\n\nexport default Viewer;\n","/* eslint-disable import/prefer-default-export */\nimport { OkJsonObject, OkJsonValue, ResultType } from '../types';\n\nconst parseType = (value: any): ResultType => {\n  if (value === null) {\n    return 'null';\n  }\n\n  if (Array.isArray(value)) {\n    return 'array';\n  }\n\n  if (typeof value === 'string') {\n    return 'string';\n  }\n\n  if (Boolean(value) === value) {\n    return 'boolean';\n  }\n\n  if (!Number.isNaN(Number(value))) {\n    return 'number';\n  }\n\n  return 'object';\n};\n\nconst parseDataItem = (value: any): OkJsonValue => {\n  const type = parseType(value);\n\n  if (type === 'array') {\n    return {\n      type,\n      value: value.map(parseDataItem),\n    };\n  }\n\n  if (type === 'object') {\n    return {\n      type,\n      value: Object\n        .entries(value)\n        .reduce((result, [key, objValue]) => ({\n          ...result,\n          [key]: parseDataItem(objValue),\n        }), {}),\n    };\n  }\n\n  return {\n    type,\n    value,\n  };\n};\n\nexport const parseDataModel = (data: object): OkJsonValue => {\n  const resultObject: OkJsonObject = Object.entries(data).reduce((result, [key, value]) => {\n    const parsedValue = parseDataItem(value);\n\n    return {\n      ...result,\n      [key]: parsedValue,\n    };\n  }, {});\n\n  return { type: 'object', value: resultObject };\n};\n","import React from 'react';\n\nimport { parseDataModel } from '../../utils/model';\n\nimport { OkJsonValue } from '../../types';\n\nimport './DataInput.css';\n\ntype Props = {\n  setError: React.Dispatch<React.SetStateAction<string | null>>,\n  setData: React.Dispatch<React.SetStateAction<OkJsonValue | null>>\n};\n\nconst mockJson = parseDataModel({\n  bigObject: {\n    cute_array: [\n      1,\n      { is_this: true },\n      'or is this',\n      null,\n    ],\n    c: 99,\n    id: '0xdeaddaed',\n  },\n  smallObject: {\n    e: 12,\n  },\n  straightText: 'Oh boy! A well.',\n  big_number: 1234567890,\n  false: false,\n  very: { nested: { and: { surprisingly: { boring: { object: true } } } } },\n});\n\nconst DataInput = ({ setError, setData }: Props) => {\n  const bigBox = React.useRef<HTMLTextAreaElement>(null);\n  const internetUrl = React.useRef<HTMLInputElement>(null);\n\n  const pasteFromClipboard = () => {\n    navigator.clipboard.readText()\n      .then((text) => {\n        try {\n          setError(null);\n          setData(parseDataModel(JSON.parse(text)));\n        } catch (e) {\n          setError('That does not look like json...');\n        }\n      })\n      .catch(() => setError('You really need to give the permission for this one...'));\n  };\n\n  const useMockData = () => {\n    setError(null);\n    setData(mockJson);\n  };\n\n  const loadFromBigBox = () => {\n    setError(null);\n    if (bigBox && bigBox.current) {\n      try {\n        setData(parseDataModel(JSON.parse(bigBox.current.value)));\n      } catch (e) {\n        setError('That does not look like json...');\n      }\n    }\n  };\n\n  const loadFromUrl = async () => {\n    setError(null);\n    if (internetUrl && internetUrl.current && internetUrl.current.value) {\n      try {\n        const response = await fetch(internetUrl.current.value);\n        setData(parseDataModel(await response.json()));\n      } catch (e) {\n        setError(`Oh no, not ${internetUrl.current.value}.`);\n      }\n    }\n  };\n\n  const canPaste = !!navigator.clipboard.readText;\n\n  return (\n    <div className=\"DataInput-main\">\n      <button type=\"button\" onClick={useMockData}>Use Mock Data</button>\n      {canPaste\n        ? <button type=\"button\" onClick={pasteFromClipboard}>Paste from clipboard</button>\n        : null}\n      <textarea ref={bigBox} placeholder=\"Or just read from here...\" />\n      <button type=\"button\" onClick={loadFromBigBox}>Load from the big box</button>\n      <input ref={internetUrl} type=\"text\" placeholder=\"url\" />\n      <button type=\"button\" onClick={loadFromUrl}>\n        Load from\n        {' '}\n        <i>the internet</i>\n      </button>\n    </div>\n  );\n};\n\nexport default DataInput;\n","import React from 'react';\n\nimport { noop } from '../../utils/common';\n\nimport { Filter } from '../../types';\n\ntype Props = {\n  setFilter: React.Dispatch<React.SetStateAction<Filter>>\n};\n\nconst DEBOUNCE_VALUE = 300;\n\nconst Toolbar = ({ setFilter }: Props) => {\n  const [inputValue, setInputValue] = React.useState('');\n  const firstMount = React.useRef(true);\n\n  React.useEffect(() => {\n    if (firstMount.current) {\n      firstMount.current = false;\n      return noop;\n    }\n\n    const interval = setTimeout(() => setFilter({ value: inputValue }), DEBOUNCE_VALUE);\n\n    return () => clearTimeout(interval);\n  }, [inputValue]);\n\n  return (\n    <div>\n      <input type=\"text\" onChange={(e) => setInputValue(e.target.value)} value={inputValue} />\n    </div>\n  );\n};\n\n\nexport default Toolbar;\n","import React from 'react';\nimport Viewer from './components/Viewer';\nimport DataInput from './components/DataInput';\nimport Toolbar from './components/Toolbar';\n\nimport { Filter, OkJsonValue } from './types';\n\nimport './App.css';\n\nfunction App() {\n  const [data, setData] = React.useState<OkJsonValue | null>(null);\n  const [error, setError] = React.useState<string | null>(null);\n  const [filter, setFilter] = React.useState<Filter>({ value: '' });\n\n  return (\n    <div className=\"App\">\n      <header className=\"App-header\">\n        Feed me JSON!\n        {error ? <span className=\"App-error\">{error}</span> : null}\n        {data ? <Toolbar setFilter={setFilter} /> : null}\n      </header>\n      <main className=\"App-body\">\n        {data\n          ? <Viewer data={data} filter={filter} />\n          : <DataInput setData={setData} setError={setError} />}\n      </main>\n    </div>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}